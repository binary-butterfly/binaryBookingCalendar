!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define("BinaryBookingCalendar",["react","prop-types"],n):"object"==typeof exports?exports.BinaryBookingCalendar=n(require("react"),require("prop-types")):e.BinaryBookingCalendar=n(e.react,e["prop-types"])}(this,(function(e,n){return(()=>{"use strict";var t={229:e=>{e.exports=n},297:n=>{n.exports=e}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{a.r(i),a.d(i,{default:()=>ve});var e=a(297),n=a.n(e),t=a(229),r=a.n(t);function o(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw i}}}}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var l=function(e,n){var t=e.getFullYear(),r=n.getFullYear();if(t===r){var a=e.getMonth(),i=n.getMonth();return a===i?0:a>i?1:-1}return t>r?1:-1},s=function(e,n){var t=l(e,n);if(0!==t)return t;var r=e.getDate(),a=n.getDate();return r>a?1:r<a?-1:0},c=function(e,n){return e*=1,n.attributes.min.value<=e&&e<=n.attributes.max.value},g=function(e,n,t){var r=new Date(e.getFullYear(),e.getMonth(),e.getDate());t&&0===n.getHours()&&0===n.getMinutes()&&r.setDate(r.getDate()+1);var a=new Date(n.getFullYear(),n.getMonth(),n.getDate())-r;return Math.ceil(a/864e5)},d=function(e,n,t){return e[n]||(e[n]=[]),e[n].bookings||(e[n].bookings=[]),e[n].bookings.push(t),e},m=function(e,n){var t={available:!0},r=n[e.toDateString()];if(r&&r.bookings){var a,i;t.bookings=r.bookings;var u,l=o(t.bookings);try{for(l.s();!(u=l.n()).done;){var s=u.value;if(!s.partial){t.available=!1;break}t.partial=!0,(!a||s.begin<a)&&(a=s.begin),(!i||s.end>i)&&(i=s.end)}}catch(e){l.e(e)}finally{l.f()}t.earliest=a,t.last=i}return t},b=function(e,n,t){var r,a,i,o,u={active:!1,partial:""};if(n&&t&&(r=n,a=t,i=e,(o=new Date(i)).setDate(o.getDate()+1),r<o&&a>i)){u.active=!0;var l=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),c=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();l.getTime()===c&&n.getHours()>0&&(u.from=n,u.partial="bottom"),s.getTime()===c&&t.getHours()<23&&(u.until=t,u.partial="bottom"===u.partial?"switch":"top")}return u},f=function(e,n,t,r,a){for(var i=!1,o=m(e,n);!o.available&&e>r&&e<a;)e=new Date(e.getTime()+t),o=m(e,n),i=!0;if(e<r||e>a)throw"RangeImpossible";return o.partial&&(t>0?o.earliest>e&&(e=o.earliest,i=!0):o.last<e&&(e=o.last,i=!0)),[i,e]},h=function(e,n,t,r,a){for(var i=!1,o=e,u=new Date(e.getTime()),l=u.getTime(),c=m(new Date(u),n),g=!0;c.available&&(s(u,r)>0&&s(a,u)>0&&!c.partial||g);)g=!1,l=u.getTime(),u.setTime(u.getTime()+t),c=m(u,n);return c.available?c.partial&&(o=t>0?c.earliest:c.last,i=!0):(o=new Date(l),i=!0),[i,o]},v=function(e){var n=new Date(e.getTime());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n},p=function(e){var n=new Date(e.getTime());return n.setHours(23),n.setMinutes(59),n.setSeconds(59),n.setMilliseconds(999),n},y=function(e,n){return E(e+15*n)},k=function(e){var n=e.getMinutes();if(59===n&&23===e.getHours())return e;var t=E(n),r=new Date(e);return r.setMinutes(t),r},E=function(e){59===e&&e++;var n=(e>=60?e-60:e)%15;return n>0&&(n>6?e=e-n+15:e-=n),e},D=function(e){var n=e.getMinutes();59===n&&n++,n-=n%15;var t=new Date(e);return t.setMinutes(n),t},w=function(e){var t=e.available,r=e.whichTime;return t.available?n().createElement(n().Fragment,null,n().createElement("p",{className:"calendar-date-dot"},t.partial&&t.bookings?n().createElement(n().Fragment,null,"⚫"):n().createElement(n().Fragment,null," ")),n().createElement("div",{className:"calendar-date-tooltip"},!e.hideAction&&n().createElement(n().Fragment,null,"Delete"===r[0]?n().createElement("p",null,"Auswahl löschen"):n().createElement("p",null,r[0],"zeitpunkt",r[1]?n().createElement(n().Fragment,null," entfernen"):n().createElement(n().Fragment,null," setzen"))),t.partial&&t.bookings&&n().createElement(n().Fragment,null,n().createElement("h4",null,"An diesem Tag bestehen bereits folgende Buchungen:"),n().createElement("ul",null,t.bookings.map((function(e,t){return n().createElement("li",{key:t},e.begin?e.begin.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Anfang des Tages"," -",e.end?e.end.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Ende des Tages")})))))):n().createElement(n().Fragment,null,n().createElement("p",{className:"calendar-date-dot"}," "),n().createElement("span",{className:"calendar-date-tooltip"},"Dieser Tag ist leider ausgebucht."))};w.propTypes={available:r().object.isRequired,whichTime:r().array.isRequired,hideAction:r().bool.isRequired};const B=w;function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return M(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var x=function(e){var t=e.date,r=e.available,a=e.active,i=S(n().useState(!1),2),o=i[0],u=i[1],l=S(n().useState(["Start",!1]),2),c=l[0],d=l[1],m=S(n().useState(!1),2),b=m[0],f=m[1];n().useEffect((function(){d(y())}),[e.bookingBegin,e.bookingEnd]);var h=n().useRef(null),y=function(){if(!e.bookingBegin)return["Start",!1];if(!e.bookingEnd)return["End",!1];if(0===s(e.bookingBegin,e.bookingEnd)&&a.active)return["Delete",null];var n=g(e.bookingBegin,t);if(0===n)return["Start",!0];var r=g(t,e.bookingEnd,!0);return 0===r?["End",!0]:n>r?["End",!1]:n<r?["Start",!1]:["begin"===e.lastSet?"Start":"End",!1]},k=function(){var n,i,o,u,l;!e.disabled&&r.available&&(a.active?"Delete"===c[0]?(e.setBookingBegin(null),e.setBookingEnd(null)):"Start"===c[0]?c[1]?e.setBookingBegin(v(e.bookingEnd)):e.setBookingBegin(t):c[1]?e.setBookingEnd(p(e.bookingBegin)):e.setBookingEnd(t):(o=e.bookingBegin,u=e.bookingEnd,l=p(t),(!e.bookingBegin||s(t,e.bookingBegin)<0)&&(o=(null!==(n=r.last)&&void 0!==n?n:e.isToday)?e.today:t),(!e.bookingEnd||s(l,e.bookingEnd)>0)&&(u=r.earliest&&o>r.earliest?o:null!==(i=r.earliest)&&void 0!==i?i:l),o!==e.bookingBegin&&u!==e.bookingEnd?e.setBookingBeginAndEnd(o,u):o!==e.bookingBegin?e.setBookingBegin(o):u!==e.bookingEnd&&e.setBookingEnd(u)))};return n().createElement("button",{className:"calendar-date",onClick:k,"data-available":r.available,"aria-disabled":e.disabled||e.maxReached||!r.available,"aria-label":t.toLocaleDateString(),"data-part-available":e.available.partial,"data-active":a.active,"data-disabled":e.disabled,"aria-checked":a.active,role:"checkbox","data-part-active":a.partial,onMouseDown:function(){e.setDragging(!0),u(!0)},onMouseUp:function(){u(!1)},onMouseLeave:function(n){f(!0),o&&e.dragging&&(k(),u(!1))},onMouseEnter:function(n){f(!1),e.dragging&&(k(),h.current.focus())},ref:h,"data-today":e.isToday,onFocus:function(){return f(!1)}},n().createElement("span",null,t.getDate()),!e.disabled&&n().createElement(B,{available:r,whichTime:c,hideAction:b})||n().createElement("p",{className:"calendar-date-dot"}," "))};x.propTypes={active:r().object.isRequired,available:r().object.isRequired,disabled:r().bool.isRequired,isToday:r().bool.isRequired,today:r().object.isRequired,setDragging:r().func.isRequired,dragging:r().bool.isRequired,bookingBegin:r().object,bookingEnd:r().object,setBookingBegin:r().func.isRequired,setBookingEnd:r().func.isRequired,setBookingBeginAndEnd:r().func.isRequired};const T=x;var A={begin:r().string.isRequired,end:r().string.isRequired},R={begin:r().object.isRequired,end:r().object.isRequired};function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function I(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return F(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var N=function(e){var t,r=e.today,a=q(n().useState(null!==(t=e.initialCurrent)&&void 0!==t?t:new Date),2),i=a[0],o=a[1],u=q(n().useState(null),2),s=u[0],c=u[1],g=q(n().useState(null),2),d=g[0],f=g[1],h=q(n().useState(null),2),v=h[0],p=h[1],y=q(n().useState(null),2),k=y[0],E=y[1],D=q(n().useState(!1),2),w=D[0],B=D[1],S=q(n().useState([]),2),M=S[0],x=S[1];n().useEffect((function(){e.initialCurrent&&o(e.initialCurrent)}),[e.initialCurrent]),n().useEffect((function(){var t=i.getFullYear(),a=i.getMonth(),o=i.getDate();f(t),p(a),E(new Date(t,a+1,0).getDate());var u=l(i,r);x(function(e,t,r,a,i,o,u,l,s,c,g,d,f,h){for(var v=new Date(e,t+1,0).getDate(),p=new Date(e,t,1).getDay(),y=new Date(e,t,0),k=y.getDate(),E=y.getDay(),D=function(e){return e<E?k-(E-e):k},w=function(e){return 0===a?e<r:-1===a},B=[],S=0,M=0;M<v;){for(var x=[],A=0;A<7;A++){var R=void 0;0===S&&A<p?R=new Date(e,t-1,D(A)):(M++,R=new Date(e,t,M));var j=m(R,i),I=b(R,o,u);x.push(n().createElement(T,{date:R,disabled:w(M),available:j,active:I,today:h,isToday:0===a&&r===M,dragging:l,setDragging:s,lastSet:c,setBookingBegin:g,setBookingEnd:d,bookingBegin:o,bookingEnd:u,setBookingBeginAndEnd:f}))}S++,B.push(x)}return B}(t,a,o,u,e.unavailableDates,e.bookingBegin,e.bookingEnd,w,B,e.lastSet,e.setBookingBegin,e.setBookingEnd,e.setBookingBeginAndEnd,e.today)),c(u)}),[i,e.unavailableDates,e.bookingBegin,e.bookingEnd]);var A=function(n,t){e.handleMonthSwitch?e.handleMonthSwitch(t):(0===l(n,r)&&(n=new Date),o(n))};return n().createElement("div",{className:"calendar",onMouseLeave:function(){return B(!1)},onMouseUp:function(){return B(!1)}},n().createElement("div",{className:"calendar-heading-row"},n().createElement("button",{disabled:e.disableBack||!e.allowPast&&1!==s,"aria-label":"Zum vorherigen Monat springen",className:"calendar-change-month-button calendar-last-month-button",onClick:function(){(e.allowPast||1===s)&&A(new Date(d,v,0),!0)}},"‹"),n().createElement("h3",null,i.toLocaleDateString("de-DE",{year:"numeric",month:"long"})),n().createElement("button",{"aria-label":"Zum nächsten Monat springen",onClick:function(){A(new Date(d,v,k+1),!1)},className:"calendar-change-month-button calendar-next-month-button"},"›")),n().createElement("div",{className:"calendar-week"},["So","Mo","Di","Mi","Do","Fr","Sa"].map((function(e){return n().createElement("div",{key:"calendarWeekDay"+e,className:"calendar-week-day"},e)}))),M.map((function(e,t){return n().createElement("div",{className:"calendar-week",key:"calendarWeek"+t},e.map((function(e,r){return n().createElement(n().Fragment,{key:"calendarWeek"+t+"Day"+r},e)})),n().createElement("br",null))})))},O={bookings:r().arrayOf(r().shape(R)).isRequired,unavailableDates:r().object,maxReached:r().bool.isRequired,today:r().object.isRequired,lastSet:r().oneOf(["begin","end"]).isRequired,bookingBegin:r().object,bookingEnd:r().object,setBookingBegin:r().func.isRequired,setBookingEnd:r().func.isRequired,setBookingBeginAndEnd:r().func.isRequired,handleMonthSwitch:r().func,initialCurrent:r().object,allowPast:r().bool};N.propTypes=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){I(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({disableBack:r().bool},O);const H=N;function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return P(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Y=function(e){for(var t,r=e.today,a=C(n().useState(null!==(t=e.initialCurrent)&&void 0!==t?t:new Date),2),i=a[0],o=a[1],u=C(n().useState(l(i,r)),2),s=u[0],c=u[1],g=function(e){var n;(n=e?new Date(i.getFullYear(),i.getMonth(),0):new Date(i.getFullYear(),i.getMonth()+1,1)).getMonth()===r.getMonth()?(n.setDate(r.getDate()),c(0)):c(l(n,r)),o(n)},d=[],m=i,b=0;b<e.monthCount;b++)d.push(n().createElement(H,{handleMonthSwitch:g,bookings:e.bookings,bookingBegin:e.bookingBegin,bookingEnd:e.bookingEnd,allowPast:e.allowPast,maxReached:e.maxReached,initialCurrent:m,today:r,unavailableDates:e.unavailableDates,disableBack:!e.allowPast&&s<1,setBookingBegin:e.setBookingBegin,setBookingEnd:e.setBookingEnd,lastSet:e.lastSet,setBookingBeginAndEnd:e.setBookingBeginAndEnd})),m=new Date(m.getFullYear(),m.getMonth()+1,1);return n().createElement(n().Fragment,null,d.map((function(e,t){return n().createElement(n().Fragment,{key:"multiMonthMonth"+t},e)})))};Y.propTypes=O;const L=Y;var z=function(e){return n().createElement("p",{className:"calendar-date-input-warning","aria-live":"polite","aria-relevant":"additions"},e.show&&n().createElement("small",null,"Bitte geben Sie eine Zahl zwischen ",e.min," und ",e.max," ein."))};z.propTypes={min:r().number,max:r().number,show:r().bool.isRequired};const U=z;function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?W(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var Z=function(e){var t,r=$(n().useState(!0),2),a=r[0],i=r[1],o=$(n().useState(!0),2),u=o[0],l=o[1],s=$(n().useState(!0),2),g=s[0],d=s[1],m=new Date,b=null!==(t=e.date)&&void 0!==t?t:m,f=e.minDate?e.minDate.getFullYear():e.pastAllowed?m.getFullYear()-1:m.getFullYear(),h=$(n().useState(b.getFullYear()),2),v=h[0],p=h[1],y=$(n().useState(b.getMonth()+1),2),k=y[0],E=y[1],D=$(n().useState(b.getDate()),2),w=D[0],B=D[1],S=$(n().useState(!1),2),M=S[0],x=S[1];n().useEffect((function(){e.date&&(p(e.date.getFullYear()),E(e.date.getMonth()+1),B(e.date.getDate())),i(!0),l(!0),d(!0),x(!1)}),[e.date]);var T=function(n,t,r){return e.minDate?new Date(n,t-1,r,e.minDate.getHours(),e.minDate.getMinutes(),e.minDate.getSeconds(),e.minDate.getMilliseconds()):new Date(n,t-1,r)},A=function(n){return e.minDate&&n<e.minDate?e.minDate.getMonth()===n.getMonth()&&(e.setDate(e.minDate),!0):!(e.maxDate&&n>e.maxDate||(e.setDate(n),x(!1),0))},R=e.minDate&&e.minDate.getFullYear()===v,j=R&&e.minDate.getMonth()+1===k,I=e.maxDate&&e.maxDate.getFullYear()===v,q=I&&e.maxDate.getMonth()+1===k,F=function(){return j?e.minDate.getDate():1},N=function(){return q?e.maxDate.getDate():function(e,n){return new Date(e,n+1,0).getDate()}(v,k-1)},O=function(){return R?e.minDate.getMonth()+1:1},H=function(){return I?e.maxDate.getMonth():12},C=function(){return e.maxDate?e.maxDate.getFullYear():f+2};return n().createElement(n().Fragment,null,n().createElement("div",{className:"calendar-booking-date-input"},n().createElement("label",{htmlFor:e.dayId},"Tag"),n().createElement("input",{type:"number",id:e.dayId,min:F(),max:N(),value:e.date||M?w:"",onChange:function(e){var n=e.target.value;c(n,e.target)?d(A(T(v,k,n))):(x(!0),B(n),d(!1))},className:"calendar-numeric-input"}),n().createElement(U,{min:F(),max:N(),show:!g})),n().createElement("div",{className:"calendar-booking-date-input"},n().createElement("label",{htmlFor:e.monthId},"Monat"),n().createElement("input",{type:"number",id:e.monthId,min:O(),max:H(),value:e.date||M?k:"",onChange:function(e){var n=e.target.value;c(n,e.target)?l(A(T(v,n,w))):(x(!0),E(n),l(!1))},className:"calendar-numeric-input"}),n().createElement(U,{min:O(),max:H(),show:!u})),n().createElement("div",{className:"calendar-booking-date-input"},n().createElement("label",{htmlFor:e.yearId},"Jahr"),n().createElement("input",{type:"number",id:e.yearId,min:f,max:C(),value:e.date||M?v:"",onChange:function(e){var n=e.target.value;c(n,e.target)?i(A(T(n,k,w))):(x(!0),p(n),i(!1))},className:"calendar-numeric-input"}),n().createElement(U,{min:f,max:C(),show:!a})))};Z.propTypes={minDate:r().object,maxDate:r().object,date:r().object,setDate:r().func.isRequired,yearId:r().string.isRequired,monthId:r().string.isRequired,dayId:r().string.isRequired,pastAllowed:r().bool};const _=Z;function V(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return J(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?J(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var G=function(e){var t,r,a=V(n().useState(e.hour),2),i=a[0],o=a[1],u=V(n().useState(e.minute),2),l=u[0],s=u[1],c=V(n().useState(!1),2),g=c[0],d=c[1],m=V(n().useState(-1),2),b=m[0],f=m[1],h=V(n().useState(61),2),v=h[0],p=h[1],y=V(n().useState(!0),2),k=y[0],E=y[1],D=V(n().useState(!0),2),w=D[0],B=D[1];n().useEffect((function(){59===e.minute&&23===e.hour?(o(24),s(0),d(!0)):(s(e.minute),o(e.hour),d(!1)),f(S(i)),p(M()),E(!0),B(!0)}),[e.minute,e.hour]),n().useEffect((function(){p(M()),f(S())}),[e.minHour,e.minMinute]);var S=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.hour;return e.minHour&&n===e.minHour?e.minMinute:-1},M=function(){var n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.hour;return e.maxHour&&t===e.maxHour?null!==(n=e.maxMinute)&&void 0!==n?n:59:61};return n().createElement("div",{className:"calendar-booking-time-row"},n().createElement("div",{className:"calendar-booking-time-input"},n().createElement("label",{htmlFor:e.hourId},"Stunde"),n().createElement("select",{id:e.hourId,value:null!=i?i:void 0,onChange:function(n){var t=1*n.target.value;24===t?(d(!0),e.setHour(23),e.setMinute(59)):(d(!1),e.setHour(t)),o(t)},className:"calendar-numeric-input"},[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24].map((function(t){if((!e.minHour||t>=e.minHour)&&(!e.maxHour||t<=e.maxHour))return n().createElement("option",{value:t,key:e.hourId+t},t)}))),n().createElement(U,{min:null!==(t=e.minHour)&&void 0!==t?t:0,max:null!==(r=e.maxHour)&&void 0!==r?r:23,show:!k})),n().createElement("div",{className:"calendar-booking-time-input"},n().createElement("label",{htmlFor:e.minuteId},"Minute"),g?n().createElement("select",{id:e.minuteId,value:null!=l?l:void 0,className:"calendar-numeric-input"},n().createElement("option",{value:0},"00")):n().createElement("select",{id:e.minuteId,onChange:function(n){var t=1*n.target.value;s(t),e.setMinute(t)},value:null!=l?l:void 0,className:"calendar-numeric-input"},["00","15","30","45"].map((function(t){return n().createElement("option",{disabled:t<b||t>v,key:e.minuteId+t,value:1*t},t)}))),n().createElement(U,{min:S(),max:M(),show:!w})))};G.propTypes={hourId:r().string.isRequired,minuteId:r().string.isRequired,hour:r().number,setHour:r().func.isRequired,minute:r().number,setMinute:r().func.isRequired,minHour:r().number,minMinute:r().number,maxHour:r().number,maxMinute:r().number};const K=G;var Q=function(e){var n=e.amount;"number"==typeof n&&(n=n.toString());var t=n.split(".");if(t.length>1){var r=t[1];r.length>2?r=r.substr(0,2):1===r.length&&(r+="0"),n=t[0]+","+r}else n=n.replace(".",",");return n+" €"};Q.propTypes={amount:r().oneOfType([r().number,r().string])};const X=Q;var ee=function(e){return n().createElement("span",{className:"calendar-stepper"},n().createElement("button",{"aria-label":e.previousLabel,className:"button calendar-stepper-button",type:"button",onClick:e.previousDisabled?void 0:e.handlePrev,disabled:e.previousDisabled},"‹"),e.children,n().createElement("button",{"aria-label":e.nextLabel,className:"button calendar-stepper-button",type:"button",onClick:e.handleNext},"›"))};ee.propTypes={children:r().element.isRequired,handlePrev:r().func.isRequired,handleNext:r().func.isRequired,previousLabel:r().string.isRequired,nextLabel:r().string.isRequired,previousDisabled:r().bool};var ne=function(e){var t=e.current.toLocaleString("de-DE",{timeStyle:"short"});return"23:59"===t&&(t="24:00"),n().createElement("div",{className:"calendar-stepper-container"},n().createElement(ee,{handlePrev:e.handlePreviousDate,handleNext:e.handleNextDate,previousLabel:"Einen Tag früher",nextLabel:"Einen Tag später",previousDisabled:e.previousDateDisabled},n().createElement("span",null,e.current.toLocaleString("de-DE",{dateStyle:"short"}))),n().createElement(ee,{handlePrev:e.handlePreviousTime,handleNext:e.handleNextTime,previousDisabled:e.previousTimeDisabled,previousLabel:"15 Minuten früher",nextLabel:"15 Minuten später"},n().createElement("span",null,t," Uhr")))};ne.propTypes={current:r().object.isRequired,handleNextDate:r().func.isRequired,handlePreviousDate:r().func.isRequired,handleNextTime:r().func.isRequired,handlePreviousTime:r().func.isRequired,previousDateDisabled:r().bool,previousTimeDisabled:r().bool};const te=ne;function re(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return ae(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ae(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var ie=function(e){var t,r=re(n().useState(),2),a=r[0],i=r[1],o=re(n().useState(),2),u=o[0],l=o[1],c=re(n().useState(null),2),g=c[0],d=c[1],m=re(n().useState(null),2),b=m[0],f=m[1],h=re(n().useState(null),2),k=h[0],E=h[1],D=re(n().useState(null),2),w=D[0],B=D[1],S=re(n().useState(!1),2),M=S[0],x=S[1],T=re(n().useState(!1),2),A=T[0],R=T[1],j=re(n().useState(!1),2),I=j[0],q=j[1],F=re(n().useState(!1),2),N=F[0],O=F[1],H=re(n().useState(!1),2),C=H[0],P=H[1],Y=re(n().useState(!1),2),L=Y[0],z=Y[1],U=re(n().useState(null),2),$=U[0],W=U[1],Z=re(n().useState(0),2),V=Z[0],J=Z[1],G=re(n().useState(),2),Q=G[0],ee=G[1],ne=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.bookingBegin;x(n),q(n&&e.today.getHours()===t.getHours()&&e.today.getMinutes()>=t.getMinutes())},ae=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.bookingBegin,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.bookingEnd;R(n),O(t&&n&&r.getHours()===a.getHours()&&r.getMinutes()>=a.getMinutes())},ie=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||ue(n,null!=u?u:e.bookingEnd),i(n)},oe=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||ue(null!=a?a:e.bookingBegin,n),l(n)},ue=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.bookingBegin,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.bookingEnd,r=n&&0===s(n,e.today),a=n&&t&&0===s(t,n);ne(r,n),ae(a,r,n,t)},le=function(e){ne(e),ae(e)},se=function(n){e.bookingEnd&&n>e.bookingEnd?e.setBookingBeginAndEnd(n,p(n)):n<e.today?e.setBookingBegin(e.today,!1,!0):e.setBookingBegin(n,!1,!0)},ce=function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.bookingBegin&&n<e.bookingBegin?t?e.setBookingEnd(e.bookingBegin):v(n)<e.today?e.setBookingBeginAndEnd(e.today(),p(e.today)):e.setBookingBeginAndEnd(v(n),n):(0===n.getHours()&&0===n.getMinutes()&&n.setMinutes(-1),e.setBookingEnd(n,!0))},ge=function(n){se(new Date(e.bookingBegin.getTime()+864e5*n))},de=function(n){var t=y(e.bookingBegin.getMinutes(),n),r=new Date(e.bookingBegin);r.setMinutes(t),se(r)},me=function(n){ce(new Date(e.bookingEnd.getTime()+864e5*n))},be=function(n){var t=y(e.bookingEnd.getMinutes(),n),r=new Date(e.bookingEnd);r.setMinutes(t),ce(r,!0)};n().useEffect((function(){e.bookingBegin?(f(e.bookingBegin.getMinutes()),d(e.bookingBegin.getHours()),ue()):(f(null),d(null),le(!1)),ie(e.bookingBegin,!0)}),[e.bookingBegin]),n().useEffect((function(){e.bookingEnd?(B(e.bookingEnd.getMinutes()),E(e.bookingEnd.getHours()),ue()):(B(null),E(null),le(!1)),oe(e.bookingEnd,!0)}),[e.bookingEnd]);var fe=function(n){J(n),e.getPrice(e.bookingBegin,e.bookingEnd).then((function(e){W(e)}))};return n().useEffect((function(){e.bookingBegin&&e.bookingEnd?(new Date).getTime()<V+1e3?(clearTimeout(Q),ee(window.setTimeout((function(){fe((new Date).getTime())}),1e3)),console.log("Too many requests, waiting a second.")):fe():W(null)}),[e.bookingBegin,e.bookingEnd]),n().createElement("form",{onSubmit:e.handleSubmit,ref:e.submitRef},n().createElement("h3",null,"Buchung"),n().createElement("div",{className:"calendar-booking-container"},n().createElement("h4",null,"Von:"),C||!e.bookingBegin?n().createElement(n().Fragment,null,n().createElement(_,{setDate:ie,yearId:"calendar-booking-begin-year-input",monthId:"calendar-booking-begin-month-input",date:a,minDate:e.today,dayId:"calendar-booking-begin-day-input"}),n().createElement(K,{hourId:"calendar-booking-begin-hour-input",minuteId:"calendar-booking-begin-minute-input",minHour:M?e.today.getHours():0,setHour:function(n){d(n),a?ie(new Date(a.getFullYear(),a.getMonth(),a.getDate(),n,null!=b?b:0)):e.bookingBegin&&ie(new Date(e.bookingBegin.getFullYear(),e.bookingBegin.getMonth(),e.bookingBegin.getDate(),n,null!=b?b:0))},hour:g,minMinute:M?e.today.getMinutes():0,setMinute:function(n){f(n),a?ie(new Date(a.getFullYear(),a.getMonth(),a.getDate(),null!=g?g:0,n)):e.bookingBegin&&ie(new Date(e.bookingBegin.getFullYear(),e.bookingBegin.getMonth(),e.bookingBegin.getDate(),null!=g?g:0,null!=n?n:0))},minute:b}),n().createElement("button",{className:"button calendar-change-time-button",onClick:function(){a?se(new Date(a.getFullYear(),a.getMonth(),a.getDate(),g,b)):e.setBookingBegin(null),P(!1)},disabled:!a},"Startzeitpunkt festlegen")):n().createElement(n().Fragment,null,n().createElement(te,{current:e.bookingBegin,previousDateDisabled:M,previousTimeDisabled:I,handleNextDate:function(){ge(1)},handlePreviousDate:function(){ge(-1)},handleNextTime:function(){de(1)},handlePreviousTime:function(){de(-1)}}),n().createElement("button",{className:"button calendar-change-time-button",onClick:function(){return P(!0)}},"Startzeitpunkt ",e.bookingBegin?"ändern":"festlegen")),n().createElement("h4",null,"Bis:"),L||!e.bookingEnd?n().createElement(n().Fragment,null,n().createElement(_,{setDate:oe,yearId:"calendar-booking-end-year-input",monthId:"calendar-booking-end-month-input",date:u,minDate:null!==(t=e.bookingBegin)&&void 0!==t?t:void 0,dayId:"calendar-booking-end-day-input"}),n().createElement(K,{hourId:"calendar-booking-end-hour-input",minuteId:"calendar-booking-end-minute-input",minHour:A?g:0,hour:k,setHour:function(n){E(n),u?oe(new Date(u.getFullYear(),u.getMonth(),u.getDate(),n,null!=w?w:0)):e.bookingEnd&&oe(new Date(e.bookingEnd.getFullYear(),e.bookingEnd.getMonth(),e.bookingEnd.getDate(),n,null!=w?w:0))},minMinute:A?b:0,minute:w,setMinute:function(n){if(B(n),u)oe(new Date(u.getFullYear(),u.getMonth(),u.getDate(),null!=k?k:0,n));else if(e.bookingEnd){var t;oe(new Date(e.bookingEnd.getFullYear(),e.bookingEnd.getMonth(),e.bookingEnd.getDate(),null!==(t=newEndHour)&&void 0!==t?t:0,n))}}}),n().createElement("button",{className:"button calendar-change-time-button",disabled:!u,onClick:function(){u?ce(new Date(u.getFullYear(),u.getMonth(),u.getDate(),k,w)):e.setBookingEnd(null),z(!1)}},"Endzeitpunkt festlegen")):n().createElement(n().Fragment,null,n().createElement(te,{current:e.bookingEnd,previousDateDisabled:A,previousTimeDisabled:N,handleNextDate:function(){me(1)},handlePreviousDate:function(){me(-1)},handleNextTime:function(){be(1)},handlePreviousTime:function(){be(-1)}}),n().createElement("button",{className:"button calendar-change-time-button",onClick:function(){return z(!0)}},"Endzeitpunkt ",e.bookingEnd?"ändern":"festlegen"))),n().createElement("button",{type:"submit",className:"button is-success calendar-submit-button",disabled:!e.bookingBegin||!e.bookingEnd},"Jetzt ",!!$&&n().createElement(n().Fragment,null,"für ",n().createElement(X,{amount:$})," ")," buchen!"))};ie.propTypes={bookingBegin:r().object,setBookingBegin:r().func.isRequired,bookingEnd:r().object,setBookingEnd:r().func.isRequired,setBookingBeginAndEnd:r().func.isRequired,handleSubmit:r().func.isRequired,submitRef:r().object.isRequired,apiBackend:r().string};const oe=ie;function ue(e,n){if(e){if("string"==typeof e)return le(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?le(e,n):void 0}}function le(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var se=function(e){var t=e.setBookingDuration,r=e.hourCount,a=e.text;return n().createElement("button",{className:"button calendar-asap-booking-button",onClick:function(){return t(r)}},a)};se.propTypes={setBookingDuration:r().func.isRequired,hourCount:r().number.isRequired,text:r().string.isRequired};var ce=function(e){var t,r,a=e.today,i=e.submitRef,o=(t=n().useState(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(t,r)||ue(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=o[0],l=o[1],c=function(e,t){return 1===e?t.push(n().createElement(se,{setBookingDuration:g,hourCount:1,text:"1 Stunde"})):24===e?t.push(n().createElement(se,{setBookingDuration:g,hourCount:24,text:"1 Tag"})):t.push(n().createElement(se,{setBookingDuration:g,hourCount:e,text:e+" Stunden"})),t};n().useEffect((function(){var n,t=[],r=!1,i=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ue(e))){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}(e.bookings);try{for(i.s();!(n=i.n()).done;){var o=n.value,u=s(o.begin,a);if(0===u&&(!1===r||t.length>0)){if(o.begin.toUTCString()===a.toUTCString()||o.begin<a&&o.end>=a){r=!0,t=[];continue}if(o.begin>a){r=!0;for(var g=Math.abs(o.begin-a)/36e5,d=1;d<=3&&g>=d;)t=c(d,t),d++}}else-1===u&&o.end>=a&&(r=!0,t=[])}}catch(e){i.e(e)}finally{i.f()}if(!r)for(var m=0,b=[1,2,3,24];m<b.length;m++)c(b[m],t);l(t)}),[e.bookings]);var g=function(n){e.setBookingBeginAndEnd(e.today,new Date(e.today.getTime()+36e5*n)),i.current&&screen.width<=950&&i.current.scrollIntoView()};return u&&u.length>0?n().createElement(n().Fragment,null,n().createElement("h3",null,"Jetzt buchen für.."),u.map((function(e,t){return n().createElement(n().Fragment,{key:t},e)}))):n().createElement(n().Fragment,null,n().createElement("h3",null,"Eine sofortige Buchung ist derzeit nicht möglich"),n().createElement("p",null,"Es existiert für den aktuellen Zeitpunkt bereits eine Buchung.",n().createElement("br",null),"Sie haben dennoch die Möglichkeit, einen späteren Startzeitpunkt auszuwählen.",n().createElement("br",null),"Dies können Sie entweder über das Formular unten oder mithilfe der Monatsansicht erledigen."))};ce.propTypes={today:r().object.isRequired,setBookingBegin:r().func.isRequired,setBookingEnd:r().func.isRequired,submitRef:r().object.isRequired,bookings:r().arrayOf(r().shape(R)).isRequired,longestAllowedBooking:r().number,setBookingBeginAndEnd:r().func};const ge=ce;function de(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,n)||me(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,n){if(e){if("string"==typeof e)return be(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?be(e,n):void 0}}function be(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var fe=function(e){return n().createElement("div",{"aria-live":"assertive","aria-relevant":"additions text"},n().createElement("p",null,n().createElement("span",{className:"calendar-meta-display calendar-warning-display"},e.maxReached&&e.maxReachedWarning)),n().createElement("p",{className:"calendar-meta-display calendar-error-display"},e.errorString))};fe.propTypes={maxReached:r().bool.isRequired,maxReachedWarning:r().string,errorString:r().oneOfType([r().element,r().string])};var he=function(e){var t,r=de(n().useState(D(new Date)),2),a=r[0],i=r[1],u=de(n().useState(null!==(t=e.initialView)&&void 0!==t?t:"day"),2),l=u[0],c=u[1],g=de(n().useState(""),2),b=g[0],v=g[1],p=de(n().useState(!1),2),y=p[0],E=p[1],w=de(n().useState(),2),B=w[0],S=w[1],M=de(n().useState(),2),x=M[0],T=M[1],A=de(n().useState([]),2),R=A[0],j=A[1],I=de(n().useState(new Map),2),q=I[0],F=I[1],N=de(n().useState("end"),2),O=N[0],C=N[1],P=de(n().useState(null),2),Y=P[0],z=P[1],U=function(){var e=D(new Date);i(e),B&&B<e&&W(e)};n().useEffect((function(){var e=setInterval(U,6e4);return function(){clearInterval(e)}}),[B]),n().useEffect((function(){z(e.maxBookingLength&&e.maxBookingLength>0?1e3*e.maxBookingLength:null)}),[e.maxBookingLength]);var $=function(e,n){if(n){if(e){var t=n.getHours(),r=e.getHours();0===t&&r!==t&&n.setHours(r,e.getMinutes())}if(0===s(n,a)){var i=n.getHours(),o=n.getMinutes(),u=a.getHours(),l=a.getMinutes();(i<u||i===u&&o<=l)&&n.setHours(u,l)}}return n},W=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];C("begin");var r=t?e:$(B,e);r&&x&&!n?V(r,x,"begin"):S(D(r))},Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];C("end");var t=n?e:$(x,e);B&&t?V(B,t,"end"):T(k(t))},_=function(e,n){if(e&&n){var t="begin"===O?"end":"begin";V(e,n,t),C(t)}else e||n?(e!==B&&W(e),n!==x&&Z(n)):(S(null),T(null),C("end"))},V=function(e,n,t){var r=function(e,n,t,r,a){if(e>n)throw new Error("Impossible new booking. End cannot be before begin. Start: "+e.toString()+" End: "+n.toString());var i=[];n||(n=new Date(e.getTime()+36e5));var u,l=!1;return function(e,n,t){return t&&Math.abs(n-e)>t}(e,n,t)&&(l=!0,"begin"===a?n=function(e,n){return new Date(e.getTime()+n)}(e,t):e=function(e,n){return new Date(e.getTime()-n)}(n,t)),(u=0===s(e,n)?function(e,n,t){var r=m(e,t);if(!0===r.partial){var a=!1;if(r.bookings.length>1){var i,u=o(r.bookings);try{for(u.s();!(i=u.n()).done;){var l=i.value;l.begin>=n||l.end<=e||(a=!0,e<l.begin&&n>l.begin&&n<l.end?n=l.begin:e=l.end,e>n&&(n=e))}}catch(e){u.e(e)}finally{u.f()}}else r.from>e&&(e=r.from,a=!0),r.until<n&&((n=r.until)<e&&(n=e),a=!0);return[a,e,n]}return r.available?[!1,e,n]:[!0]}(e,n,r):"begin"===a?function(e,n,t){var r=!1,a=f(e,t,864e5,e,n);a[0]&&(r=!0,e=a[1]);var i=h(e,t,864e5,e,n);return i[0]&&(r=!0,n=i[1]),[r,e,n]}(e,n,r):function(e,n,t){var r=f(n,t,-864e5,e,n),a=r[0];n=r[1];var i=h(n,t,-864e5,e,n);return i[0]&&(a=!0,e=i[1]),[a,e,n]}(e,n,r))[0]?u[1]&&u[2]?(i.push("unavailable"),e=u[1],n=u[2]):(i.push("unavailable_impossible"),e(null),n(null)):l&&i.push("tooLong"),{begin:e,end:n,errors:i}}(e,n,Y,q,t);Q(r.errors),S(D(r.begin)),T(k(r.end))};n().useEffect((function(){var n=[];if(e.bookings){var t,r=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=me(e))){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}(e.bookings);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push({begin:new Date(a.begin),end:new Date(a.end)})}}catch(e){r.e(e)}finally{r.f()}}j(n),F(function(e){var n,t=new Map,r=o(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.begin>a.end)throw error("Invalid booking. End time cannot be before start time.");var i=a.begin.getDate(),u=new Date(a.begin.getFullYear(),a.begin.getMonth(),i),l=u.getTime(),s=new Date(a.end.getFullYear(),a.end.getMonth(),a.end.getDate()),c=s.getTime(),g=l===c?0:l<c?-1:1,m=u.toDateString();if(-1===g){d(t,m,{partial:a.begin.getHours()>0&&"bottom",begin:a.begin}),d(t,(0===a.end.getHours()?new Date(s-864e5):s).toDateString(),{partial:a.end.getHours<23,end:a.end});for(var b=new Date(u.getTime()),f=i+1;b.setDate(f)&&b<s;)d(t,b.toDateString(),{partial:!1}),f++}else{if(0!==g)throw"Invalid booking. End time cannot be before start time.";var h="false",v=null,p=null;a.begin.getHours()>0&&(h=!0,v=a.begin),a.end.getHours()<23&&(h=!0,p=a.end),d(t,m,{partial:h,begin:v,end:p})}}}catch(e){r.e(e)}finally{r.f()}return t}(n))}),[e.bookings]);var J=n().useRef(null),G="Sie haben die längste mögliche Buchungsdauer erreicht.",K={unavailable:"Der von Ihnen ausgewählte Buchungszeitraum enthielt Zeiten, die nicht verfügbar sind. Er wurde automatisch angepasst.",unavailable_impossible:"Der von Ihnen ausgewählte Buchungszeitraum ist bereits vergeben und konnte nicht automatisch angepasst werden. Bitte wählen Sie einen anderen Zeitraum.",tooLong:"Der von Ihnen ausgewählte Buchungszeitraum war zu lang. Er wurde automatisch gekürzt."},Q=function(e){var t="",r=!1;e.forEach((function(e){t=n().createElement(n().Fragment,null,t,K[e],n().createElement("br",null)),"tooLong"===e&&(r=!0)})),E(r),v(t)},X=function(e){c(e.target.value)};return n().createElement("div",{className:"calendar-container"},n().createElement("div",{className:"calendar-date-container"},n().createElement(fe,{maxReached:y,errorString:b,maxReachedWarning:G}),n().createElement("p",{className:"calendar-header"},n().createElement("span",{className:"calendar-view-change-meta-label"},"Ansicht:"),n().createElement("input",{type:"radio",name:"view",value:"asap",className:"calendar-view-radio",checked:"asap"===l,onChange:X,id:"calendar-view-radio-asap"}),n().createElement("label",{htmlFor:"calendar-view-radio-asap"},"Sofort"),n().createElement("input",{type:"radio",name:"view",value:"month",className:"calendar-view-radio",checked:"month"===l,onChange:X,id:"calendar-view-radio-month"}),n().createElement("label",{htmlFor:"calendar-view-radio-month"},"Monat"),n().createElement("input",{type:"radio",name:"view",className:"calendar-view-radio",value:"3months",checked:"3months"===l,onChange:X,id:"calendar-view-radio-3months"}),n().createElement("label",{htmlFor:"calendar-view-radio-3months"},"3 Monate")),"asap"===l&&n().createElement(ge,{today:a,setBookingBegin:W,setBookingEnd:Z,submitRef:J,bookings:R,setBookingBeginAndEnd:_}),"month"===l&&n().createElement(H,{bookings:R,bookingBegin:B,bookingEnd:x,today:a,unavailableDates:q,setBookingBegin:W,setBookingEnd:Z,maxReached:y,setBookingBeginAndEnd:_,lastSet:O}),"3months"===l&&n().createElement(L,{monthCount:3,bookings:R,maxReached:y,bookingBegin:B,bookingEnd:x,today:a,setBookingBeginAndEnd:_,unavailableDates:q,lastSet:O,setBookingBegin:W,setBookingEnd:Z}),n().createElement(fe,{maxReached:y,maxReachedWarning:G,errorString:b})),n().createElement("div",{className:"calendar-time-container"},n().createElement(oe,{apiBackend:e.apiBackend,getPrice:e.getPrice,bookingBegin:B,setBookingBegin:W,bookingEnd:x,setBookingEnd:Z,today:a,submitRef:J,handleSubmit:function(n){n.preventDefault(),U(),e.handleSubmit(B,x)},setBookingBeginAndEnd:_})))};he.propTypes={apiBackend:r().string,bookings:r().arrayOf(r().shape(A)).isRequired,maxBookingLength:r().number,initialView:r().oneOf(["day","month","3months","asap"]),handleSubmit:r().func.isRequired,getPrice:r().func.isRequired};const ve=he})(),i})()}));