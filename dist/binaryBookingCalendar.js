/*! For license information please see binaryBookingCalendar.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("BinaryBookingCalendar",[],t):"object"==typeof exports?exports.BinaryBookingCalendar=t():e.BinaryBookingCalendar=t()}(this,(function(){return(()=>{var e={418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,u,l=a(e),c=1;c<arguments.length;c++){for(var s in i=Object(arguments[c]))n.call(i,s)&&(l[s]=i[s]);if(t){u=t(i);for(var d=0;d<u.length;d++)r.call(i,u[d])&&(l[u[d]]=i[u[d]])}}return l}},703:(e,t,n)=>{"use strict";var r=n(414);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:(e,t,n)=>{"use strict";var r=n(418),a=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var i=60109,u=60110,l=60112;t.Suspense=60113;var c=60115,s=60116;if("function"==typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),i=d("react.provider"),u=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),s=d("react.lazy")}var g="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function p(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||m}function h(){}function v(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||m}p.prototype.isReactComponent={},p.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},p.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=p.prototype;var y=v.prototype=new h;y.constructor=v,r(y,p.prototype),y.isPureReactComponent=!0;var k={current:null},E=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,n){var r,o={},i=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),s=0;s<l;s++)c[s]=arguments[s+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:a,type:e,key:i,ref:u,props:o,_owner:k.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var B=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,n,r,i){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var l=!1;if(null===e)l=!0;else switch(u){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case o:l=!0}}if(l)return i=i(l=e),e=""===r?"."+M(l,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(B,"$&/")+"/"),R(i,t,n,"",(function(e){return e}))):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(B,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var s=r+M(u=e[c],c);l+=R(u,t,n,s,i)}else if("function"==typeof(s=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e)))for(e=s.call(e),c=0;!(u=e.next()).done;)l+=R(u=u.value,t,n,s=r+M(u,c++),i);else if("object"===u)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function x(e,t,n){if(null==e)return e;var r=[],a=0;return R(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function j(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function A(){var e=T.current;if(null===e)throw Error(f(321));return e}var O={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},t.Component=p,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var o=r({},e.props),i=e.key,u=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,l=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(s in t)E.call(t,s)&&!w.hasOwnProperty(s)&&(o[s]=void 0===t[s]&&void 0!==c?c[s]:t[s])}var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){c=Array(s);for(var d=0;d<s;d++)c[d]=arguments[d+2];o.children=c}return{$$typeof:a,type:e.type,key:i,ref:u,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:s,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{"use strict";e.exports=n(408)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{default:()=>pe});var e=n(294),t=n(697),a=n.n(t);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e,t){var n=e.getFullYear(),r=t.getFullYear();if(n===r){var a=e.getMonth(),o=t.getMonth();return a===o?0:a>o?1:-1}return n>r?1:-1},l=function(e,t){var n=u(e,t);if(0!==n)return n;var r=e.getDate(),a=t.getDate();return r>a?1:r<a?-1:0},c=function(e,t){return e*=1,t.attributes.min.value<=e&&e<=t.attributes.max.value},s=function(e,t,n){var r=new Date(e.getFullYear(),e.getMonth(),e.getDate());n&&0===t.getHours()&&0===t.getMinutes()&&r.setDate(r.getDate()+1);var a=new Date(t.getFullYear(),t.getMonth(),t.getDate())-r;return Math.ceil(a/864e5)},d=function(e,t,n){return e[t]||(e[t]=[]),e[t].bookings||(e[t].bookings=[]),e[t].bookings.push(n),e},g=function(e,t){var n={available:!0},r=t[e.toDateString()];if(r&&r.bookings){var a,i;n.bookings=r.bookings;var u,l=o(n.bookings);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(!c.partial){n.available=!1;break}n.partial=!0,(!a||c.begin<a)&&(a=c.begin),(!i||c.end>i)&&(i=c.end)}}catch(e){l.e(e)}finally{l.f()}n.earliest=a,n.last=i}return n},f=function(e,t,n){var r,a,o,i,u={active:!1,partial:""};if(t&&n&&(r=t,a=n,o=e,(i=new Date(o)).setDate(i.getDate()+1),r<i&&a>o)){u.active=!0;var l=new Date(t.getFullYear(),t.getMonth(),t.getDate()),c=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();l.getTime()===s&&t.getHours()>0&&(u.from=t,u.partial="bottom"),c.getTime()===s&&n.getHours()<23&&(u.until=n,u.partial="bottom"===u.partial?"switch":"top")}return u},m=function(e,t,n,r,a){for(var o=!1,i=g(e,t);!i.available&&e>r&&e<a;)e=new Date(e.getTime()+n),i=g(e,t),o=!0;if(e<r||e>a)throw"RangeImpossible";return i.partial&&(n>0?i.earliest>e&&(e=i.earliest,o=!0):i.last<e&&(e=i.last,o=!0)),[o,e]},b=function(e,t,n,r,a){for(var o=!1,i=e,u=new Date(e.getTime()),c=u.getTime(),s=g(new Date(u),t),d=!0;s.available&&(l(u,r)>0&&l(a,u)>0&&!s.partial||d);)d=!1,c=u.getTime(),u.setTime(u.getTime()+n),s=g(u,t);return s.available?s.partial&&(i=n>0?s.earliest:s.last,o=!0):(i=new Date(c),o=!0),[o,i]},p=function(e){var t=new Date(e.getTime());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},h=function(e){var t=new Date(e.getTime());return t.setHours(23),t.setMinutes(59),t.setSeconds(59),t.setMilliseconds(999),t},v=function(e,t){return k(e+15*t)},y=function(e){var t=e.getMinutes();if(59===t&&23===e.getHours())return e;var n=k(t),r=new Date(e);return r.setMinutes(n),r},k=function(e){59===e&&e++;var t=(e>=60?e-60:e)%15;return t>0&&(t>6?e=e-t+15:e-=t),e},E=function(e){var t=e.getMinutes();59===t&&t++,t-=t%15;var n=new Date(e);return n.setMinutes(t),n},w=function(t){var n=t.available,r=t.whichTime;return n.available?e.createElement(e.Fragment,null,e.createElement("p",{className:"calendar-date-dot"},n.partial&&n.bookings?e.createElement(e.Fragment,null,"⚫"):e.createElement(e.Fragment,null," ")),e.createElement("div",{className:"calendar-date-tooltip"},!t.hideAction&&e.createElement(e.Fragment,null,"Delete"===r[0]?e.createElement("p",null,"Auswahl löschen"):e.createElement("p",null,r[0],"zeitpunkt",r[1]?e.createElement(e.Fragment,null," entfernen"):e.createElement(e.Fragment,null," setzen"))),n.partial&&n.bookings&&e.createElement(e.Fragment,null,e.createElement("h4",null,"An diesem Tag bestehen bereits folgende Buchungen:"),e.createElement("ul",null,n.bookings.map((function(t,n){return e.createElement("li",{key:n},t.begin?t.begin.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Anfang des Tages"," -",t.end?t.end.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Ende des Tages")})))))):e.createElement(e.Fragment,null,e.createElement("p",{className:"calendar-date-dot"}," "),e.createElement("span",{className:"calendar-date-tooltip"},"Dieser Tag ist leider ausgebucht."))};w.propTypes={available:a().object.isRequired,whichTime:a().array.isRequired,hideAction:a().bool.isRequired};const D=w;function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(t){var n=t.date,r=t.available,a=t.active,o=S(e.useState(!1),2),i=o[0],u=o[1],c=S(e.useState(["Start",!1]),2),d=c[0],g=c[1],f=S(e.useState(!1),2),m=f[0],b=f[1];e.useEffect((function(){g(y())}),[t.bookingBegin,t.bookingEnd]);var v=e.useRef(null),y=function(){if(!t.bookingBegin)return["Start",!1];if(!t.bookingEnd)return["End",!1];if(0===l(t.bookingBegin,t.bookingEnd)&&a.active)return["Delete",null];var e=s(t.bookingBegin,n);if(0===e)return["Start",!0];var r=s(n,t.bookingEnd,!0);return 0===r?["End",!0]:e>r?["End",!1]:e<r?["Start",!1]:["begin"===t.lastSet?"Start":"End",!1]},k=function(){var e,o,i,u,c;!t.disabled&&r.available&&(a.active?"Delete"===d[0]?(t.setBookingBegin(null),t.setBookingEnd(null)):"Start"===d[0]?d[1]?t.setBookingBegin(p(t.bookingEnd)):t.setBookingBegin(n):d[1]?t.setBookingEnd(h(t.bookingBegin)):t.setBookingEnd(n):(i=t.bookingBegin,u=t.bookingEnd,c=h(n),(!t.bookingBegin||l(n,t.bookingBegin)<0)&&(i=(null!==(e=r.last)&&void 0!==e?e:t.isToday)?t.today:n),(!t.bookingEnd||l(c,t.bookingEnd)>0)&&(u=r.earliest&&i>r.earliest?i:null!==(o=r.earliest)&&void 0!==o?o:c),i!==t.bookingBegin&&u!==t.bookingEnd?t.setBookingBeginAndEnd(i,u):i!==t.bookingBegin?t.setBookingBegin(i):u!==t.bookingEnd&&t.setBookingEnd(u)))};return e.createElement("button",{className:"calendar-date",onClick:k,"data-available":r.available,"aria-disabled":t.disabled||t.maxReached||!r.available,"aria-label":n.toLocaleDateString(),"data-part-available":t.available.partial,"data-active":a.active,"data-disabled":t.disabled,"aria-checked":a.active,role:"checkbox","data-part-active":a.partial,onMouseDown:function(){t.setDragging(!0),u(!0)},onMouseUp:function(){u(!1)},onMouseLeave:function(e){b(!0),i&&t.dragging&&(k(),u(!1))},onMouseEnter:function(e){b(!1),t.dragging&&(k(),v.current.focus())},ref:v,"data-today":t.isToday,onFocus:function(){return b(!1)}},e.createElement("span",null,n.getDate()),!t.disabled&&e.createElement(D,{available:r,whichTime:d,hideAction:m})||e.createElement("p",{className:"calendar-date-dot"}," "))};M.propTypes={active:a().object.isRequired,available:a().object.isRequired,disabled:a().bool.isRequired,isToday:a().bool.isRequired,today:a().object.isRequired,setDragging:a().func.isRequired,dragging:a().bool.isRequired,bookingBegin:a().object,bookingEnd:a().object,setBookingBegin:a().func.isRequired,setBookingEnd:a().func.isRequired,setBookingBeginAndEnd:a().func.isRequired};const R=M;var x={begin:a().string.isRequired,end:a().string.isRequired},j={begin:a().object.isRequired,end:a().object.isRequired};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=function(t){var n,r=t.today,a=O(e.useState(null!==(n=t.initialCurrent)&&void 0!==n?n:new Date),2),o=a[0],i=a[1],l=O(e.useState(null),2),c=l[0],s=l[1],d=O(e.useState(null),2),m=d[0],b=d[1],p=O(e.useState(null),2),h=p[0],v=p[1],y=O(e.useState(null),2),k=y[0],E=y[1],w=O(e.useState(!1),2),D=w[0],S=w[1],B=O(e.useState([]),2),M=B[0],x=B[1];e.useEffect((function(){t.initialCurrent&&i(t.initialCurrent)}),[t.initialCurrent]),e.useEffect((function(){var n=o.getFullYear(),a=o.getMonth(),i=o.getDate();b(n),v(a),E(new Date(n,a+1,0).getDate());var l=u(o,r);x(function(t,n,r,a,o,i,u,l,c,s,d,m,b,p){for(var h=new Date(t,n+1,0).getDate(),v=new Date(t,n,1).getDay(),y=new Date(t,n,0),k=y.getDate(),E=y.getDay(),w=function(e){return e<E?k-(E-e):k},D=function(e){return 0===a?e<r:-1===a},S=[],B=0,M=0;M<h;){for(var x=[],j=0;j<7;j++){var T=void 0;0===B&&j<v?T=new Date(t,n-1,w(j)):(M++,T=new Date(t,n,M));var A=g(T,o),O=f(T,i,u);x.push(e.createElement(R,{date:T,disabled:D(M),available:A,active:O,today:p,isToday:0===a&&r===M,dragging:l,setDragging:c,lastSet:s,setBookingBegin:d,setBookingEnd:m,bookingBegin:i,bookingEnd:u,setBookingBeginAndEnd:b}))}B++,S.push(x)}return S}(n,a,i,l,t.unavailableDates,t.bookingBegin,t.bookingEnd,D,S,t.lastSet,t.setBookingBegin,t.setBookingEnd,t.setBookingBeginAndEnd,t.today)),s(l)}),[o,t.unavailableDates,t.bookingBegin,t.bookingEnd]);var j=function(e,n){t.handleMonthSwitch?t.handleMonthSwitch(n):(0===u(e,r)&&(e=new Date),i(e))};return e.createElement("div",{className:"calendar",onMouseLeave:function(){return S(!1)},onMouseUp:function(){return S(!1)}},e.createElement("div",{className:"calendar-heading-row"},e.createElement("button",{disabled:t.disableBack||!t.allowPast&&1!==c,"aria-label":"Zum vorherigen Monat springen",className:"calendar-change-month-button calendar-last-month-button",onClick:function(){(t.allowPast||1===c)&&j(new Date(m,h,0),!0)}},"‹"),e.createElement("h3",null,o.toLocaleDateString("de-DE",{year:"numeric",month:"long"})),e.createElement("button",{"aria-label":"Zum nächsten Monat springen",onClick:function(){j(new Date(m,h,k+1),!1)},className:"calendar-change-month-button calendar-next-month-button"},"›")),e.createElement("div",{className:"calendar-week"},["So","Mo","Di","Mi","Do","Fr","Sa"].map((function(t){return e.createElement("div",{key:"calendarWeekDay"+t,className:"calendar-week-day"},t)}))),M.map((function(t,n){return e.createElement("div",{className:"calendar-week",key:"calendarWeek"+n},t.map((function(t,r){return e.createElement(e.Fragment,{key:"calendarWeek"+n+"Day"+r},t)})),e.createElement("br",null))})))},F={bookings:a().arrayOf(a().shape(j)).isRequired,unavailableDates:a().object,maxReached:a().bool.isRequired,today:a().object.isRequired,lastSet:a().oneOf(["begin","end"]).isRequired,bookingBegin:a().object,bookingEnd:a().object,setBookingBegin:a().func.isRequired,setBookingEnd:a().func.isRequired,setBookingBeginAndEnd:a().func.isRequired,handleMonthSwitch:a().func,initialCurrent:a().object,allowPast:a().bool};C.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({disableBack:a().bool},F);const q=C;function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(t){for(var n,r=t.today,a=N(e.useState(null!==(n=t.initialCurrent)&&void 0!==n?n:new Date),2),o=a[0],i=a[1],l=N(e.useState(u(o,r)),2),c=l[0],s=l[1],d=function(e){var t;(t=e?new Date(o.getFullYear(),o.getMonth(),0):new Date(o.getFullYear(),o.getMonth()+1,1)).getMonth()===r.getMonth()?(t.setDate(r.getDate()),s(0)):s(u(t,r)),i(t)},g=[],f=o,m=0;m<t.monthCount;m++)g.push(e.createElement(q,{handleMonthSwitch:d,bookings:t.bookings,bookingBegin:t.bookingBegin,bookingEnd:t.bookingEnd,allowPast:t.allowPast,maxReached:t.maxReached,initialCurrent:f,today:r,unavailableDates:t.unavailableDates,disableBack:!t.allowPast&&c<1,setBookingBegin:t.setBookingBegin,setBookingEnd:t.setBookingEnd,lastSet:t.lastSet,setBookingBeginAndEnd:t.setBookingBeginAndEnd})),f=new Date(f.getFullYear(),f.getMonth()+1,1);return e.createElement(e.Fragment,null,g.map((function(t,n){return e.createElement(e.Fragment,{key:"multiMonthMonth"+n},t)})))};P.propTypes=F;const H=P;var Y=function(t){return e.createElement("p",{className:"calendar-date-input-warning","aria-live":"polite","aria-relevant":"additions"},t.show&&e.createElement("small",null,"Bitte geben Sie eine Zahl zwischen ",t.min," und ",t.max," ein."))};Y.propTypes={min:a().number,max:a().number,show:a().bool.isRequired};const $=Y;function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=function(t){var n,r=L(e.useState(!0),2),a=r[0],o=r[1],i=L(e.useState(!0),2),u=i[0],l=i[1],s=L(e.useState(!0),2),d=s[0],g=s[1],f=new Date,m=null!==(n=t.date)&&void 0!==n?n:f,b=t.minDate?t.minDate.getFullYear():t.pastAllowed?f.getFullYear()-1:f.getFullYear(),p=L(e.useState(m.getFullYear()),2),h=p[0],v=p[1],y=L(e.useState(m.getMonth()+1),2),k=y[0],E=y[1],w=L(e.useState(m.getDate()),2),D=w[0],S=w[1],B=L(e.useState(!1),2),M=B[0],R=B[1];e.useEffect((function(){t.date&&(v(t.date.getFullYear()),E(t.date.getMonth()+1),S(t.date.getDate())),o(!0),l(!0),g(!0),R(!1)}),[t.date]);var x=function(e,n,r){return t.minDate?new Date(e,n-1,r,t.minDate.getHours(),t.minDate.getMinutes(),t.minDate.getSeconds(),t.minDate.getMilliseconds()):new Date(e,n-1,r)},j=function(e){return t.minDate&&e<t.minDate?t.minDate.getMonth()===e.getMonth()&&(t.setDate(t.minDate),!0):!(t.maxDate&&e>t.maxDate||(t.setDate(e),R(!1),0))},T=t.minDate&&t.minDate.getFullYear()===h,A=T&&t.minDate.getMonth()+1===k,O=t.maxDate&&t.maxDate.getFullYear()===h,I=O&&t.maxDate.getMonth()+1===k,C=function(){return A?t.minDate.getDate():1},F=function(){return I?t.maxDate.getDate():function(e,t){return new Date(e,t+1,0).getDate()}(h,k-1)},q=function(){return T?t.minDate.getMonth()+1:1},N=function(){return O?t.maxDate.getMonth():12},_=function(){return t.maxDate?t.maxDate.getFullYear():b+2};return e.createElement(e.Fragment,null,e.createElement("div",{className:"calendar-booking-date-input"},e.createElement("label",{htmlFor:t.dayId},"Tag"),e.createElement("input",{type:"number",id:t.dayId,min:C(),max:F(),value:t.date||M?D:"",onChange:function(e){var t=e.target.value;c(t,e.target)?g(j(x(h,k,t))):(R(!0),S(t),g(!1))},className:"calendar-numeric-input"}),e.createElement($,{min:C(),max:F(),show:!d})),e.createElement("div",{className:"calendar-booking-date-input"},e.createElement("label",{htmlFor:t.monthId},"Monat"),e.createElement("input",{type:"number",id:t.monthId,min:q(),max:N(),value:t.date||M?k:"",onChange:function(e){var t=e.target.value;c(t,e.target)?l(j(x(h,t,D))):(R(!0),E(t),l(!1))},className:"calendar-numeric-input"}),e.createElement($,{min:q(),max:N(),show:!u})),e.createElement("div",{className:"calendar-booking-date-input"},e.createElement("label",{htmlFor:t.yearId},"Jahr"),e.createElement("input",{type:"number",id:t.yearId,min:b,max:_(),value:t.date||M?h:"",onChange:function(e){var t=e.target.value;c(t,e.target)?o(j(x(t,k,D))):(R(!0),v(t),o(!1))},className:"calendar-numeric-input"}),e.createElement($,{min:b,max:_(),show:!a})))};z.propTypes={minDate:a().object,maxDate:a().object,date:a().object,setDate:a().func.isRequired,yearId:a().string.isRequired,monthId:a().string.isRequired,dayId:a().string.isRequired,pastAllowed:a().bool};const W=z;function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(t){var n,r,a=V(e.useState(t.hour),2),o=a[0],i=a[1],u=V(e.useState(t.minute),2),l=u[0],c=u[1],s=V(e.useState(!1),2),d=s[0],g=s[1],f=V(e.useState(-1),2),m=f[0],b=f[1],p=V(e.useState(61),2),h=p[0],v=p[1],y=V(e.useState(!0),2),k=y[0],E=y[1],w=V(e.useState(!0),2),D=w[0],S=w[1];e.useEffect((function(){59===t.minute&&23===t.hour?(i(24),c(0),g(!0)):(c(t.minute),i(t.hour),g(!1)),b(B(o)),v(M()),E(!0),S(!0)}),[t.minute,t.hour]),e.useEffect((function(){v(M()),b(B())}),[t.minHour,t.minMinute]);var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.hour;return t.minHour&&e===t.minHour?t.minMinute:-1},M=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.hour;return t.maxHour&&n===t.maxHour?null!==(e=t.maxMinute)&&void 0!==e?e:59:61};return e.createElement("div",{className:"calendar-booking-time-row"},e.createElement("div",{className:"calendar-booking-time-input"},e.createElement("label",{htmlFor:t.hourId},"Stunde"),e.createElement("select",{id:t.hourId,value:null!=o?o:void 0,onChange:function(e){var n=1*e.target.value;24===n?(g(!0),t.setHour(23),t.setMinute(59)):(g(!1),t.setHour(n)),i(n)},className:"calendar-numeric-input"},[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24].map((function(n){if((!t.minHour||n>=t.minHour)&&(!t.maxHour||n<=t.maxHour))return e.createElement("option",{value:n,key:t.hourId+n},n)}))),e.createElement($,{min:null!==(n=t.minHour)&&void 0!==n?n:0,max:null!==(r=t.maxHour)&&void 0!==r?r:23,show:!k})),e.createElement("div",{className:"calendar-booking-time-input"},e.createElement("label",{htmlFor:t.minuteId},"Minute"),d?e.createElement("select",{id:t.minuteId,value:null!=l?l:void 0,className:"calendar-numeric-input"},e.createElement("option",{value:0},"00")):e.createElement("select",{id:t.minuteId,onChange:function(e){var n=1*e.target.value;c(n),t.setMinute(n)},value:null!=l?l:void 0,className:"calendar-numeric-input"},["00","15","30","45"].map((function(n){return e.createElement("option",{disabled:n<m||n>h,key:t.minuteId+n,value:1*n},n)}))),e.createElement($,{min:B(),max:M(),show:!D})))};J.propTypes={hourId:a().string.isRequired,minuteId:a().string.isRequired,hour:a().number,setHour:a().func.isRequired,minute:a().number,setMinute:a().func.isRequired,minHour:a().number,minMinute:a().number,maxHour:a().number,maxMinute:a().number};const G=J;var K=function(e){var t=e.amount;"number"==typeof t&&(t=t.toString());var n=t.split(".");if(n.length>1){var r=n[1];r.length>2?r=r.substr(0,2):1===r.length&&(r+="0"),t=n[0]+","+r}else t=t.replace(".",",");return t+" €"};K.propTypes={amount:a().oneOfType([a().number,a().string])};const Q=K;var X=function(t){return e.createElement("span",{className:"calendar-stepper"},e.createElement("button",{"aria-label":t.previousLabel,className:"button calendar-stepper-button",type:"button",onClick:t.previousDisabled?void 0:t.handlePrev,disabled:t.previousDisabled},"‹"),t.children,e.createElement("button",{"aria-label":t.nextLabel,className:"button calendar-stepper-button",type:"button",onClick:t.handleNext},"›"))};X.propTypes={children:a().element.isRequired,handlePrev:a().func.isRequired,handleNext:a().func.isRequired,previousLabel:a().string.isRequired,nextLabel:a().string.isRequired,previousDisabled:a().bool};var ee=function(t){var n=t.current.toLocaleString("de-DE",{timeStyle:"short"});return"23:59"===n&&(n="24:00"),e.createElement("div",{className:"calendar-stepper-container"},e.createElement(X,{handlePrev:t.handlePreviousDate,handleNext:t.handleNextDate,previousLabel:"Einen Tag früher",nextLabel:"Einen Tag später",previousDisabled:t.previousDateDisabled},e.createElement("span",null,t.current.toLocaleString("de-DE",{dateStyle:"short"}))),e.createElement(X,{handlePrev:t.handlePreviousTime,handleNext:t.handleNextTime,previousDisabled:t.previousTimeDisabled,previousLabel:"15 Minuten früher",nextLabel:"15 Minuten später"},e.createElement("span",null,n," Uhr")))};ee.propTypes={current:a().object.isRequired,handleNextDate:a().func.isRequired,handlePreviousDate:a().func.isRequired,handleNextTime:a().func.isRequired,handlePreviousTime:a().func.isRequired,previousDateDisabled:a().bool,previousTimeDisabled:a().bool};const te=ee;function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(t){var n,r=ne(e.useState(),2),a=r[0],o=r[1],i=ne(e.useState(),2),u=i[0],c=i[1],s=ne(e.useState(null),2),d=s[0],g=s[1],f=ne(e.useState(null),2),m=f[0],b=f[1],y=ne(e.useState(null),2),k=y[0],E=y[1],w=ne(e.useState(null),2),D=w[0],S=w[1],B=ne(e.useState(!1),2),M=B[0],R=B[1],x=ne(e.useState(!1),2),j=x[0],T=x[1],A=ne(e.useState(!1),2),O=A[0],I=A[1],C=ne(e.useState(!1),2),F=C[0],q=C[1],N=ne(e.useState(!1),2),_=N[0],P=N[1],H=ne(e.useState(!1),2),Y=H[0],$=H[1],L=ne(e.useState(null),2),U=L[0],z=L[1],V=ne(e.useState(0),2),Z=V[0],J=V[1],K=ne(e.useState(),2),X=K[0],ee=K[1],re=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.bookingBegin;R(e),I(e&&t.today.getHours()===n.getHours()&&t.today.getMinutes()>=n.getMinutes())},ae=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.bookingBegin,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.bookingEnd;T(e),q(n&&e&&r.getHours()===a.getHours()&&r.getMinutes()>=a.getMinutes())},oe=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n||ue(e,null!=u?u:t.bookingEnd),o(e)},ie=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n||ue(null!=a?a:t.bookingBegin,e),c(e)},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.bookingBegin,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.bookingEnd,r=e&&0===l(e,t.today),a=e&&n&&0===l(n,e);re(r,e),ae(a,r,e,n)},le=function(e){re(e),ae(e)},ce=function(e){t.bookingEnd&&e>t.bookingEnd?t.setBookingBeginAndEnd(e,h(e)):e<t.today?t.setBookingBegin(t.today,!1,!0):t.setBookingBegin(e,!1,!0)},se=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.bookingBegin&&e<t.bookingBegin?n?t.setBookingEnd(t.bookingBegin):p(e)<t.today?t.setBookingBeginAndEnd(t.today(),h(t.today)):t.setBookingBeginAndEnd(p(e),e):(0===e.getHours()&&0===e.getMinutes()&&e.setMinutes(-1),t.setBookingEnd(e,!0))},de=function(e){ce(new Date(t.bookingBegin.getTime()+864e5*e))},ge=function(e){var n=v(t.bookingBegin.getMinutes(),e),r=new Date(t.bookingBegin);r.setMinutes(n),ce(r)},fe=function(e){se(new Date(t.bookingEnd.getTime()+864e5*e))},me=function(e){var n=v(t.bookingEnd.getMinutes(),e),r=new Date(t.bookingEnd);r.setMinutes(n),se(r,!0)};e.useEffect((function(){t.bookingBegin?(b(t.bookingBegin.getMinutes()),g(t.bookingBegin.getHours()),ue()):(b(null),g(null),le(!1)),oe(t.bookingBegin,!0)}),[t.bookingBegin]),e.useEffect((function(){t.bookingEnd?(S(t.bookingEnd.getMinutes()),E(t.bookingEnd.getHours()),ue()):(S(null),E(null),le(!1)),ie(t.bookingEnd,!0)}),[t.bookingEnd]);var be=function(e){J(e),t.getPrice(t.bookingBegin,t.bookingEnd).then((function(e){z(e)}))};return e.useEffect((function(){t.bookingBegin&&t.bookingEnd?(new Date).getTime()<Z+1e3?(clearTimeout(X),ee(window.setTimeout((function(){be((new Date).getTime())}),1e3)),console.log("Too many requests, waiting a second.")):be():z(null)}),[t.bookingBegin,t.bookingEnd]),e.createElement("form",{onSubmit:t.handleSubmit,ref:t.submitRef},e.createElement("h3",null,"Buchung"),e.createElement("div",{className:"calendar-booking-container"},e.createElement("h4",null,"Von:"),_||!t.bookingBegin?e.createElement(e.Fragment,null,e.createElement(W,{setDate:oe,yearId:"calendar-booking-begin-year-input",monthId:"calendar-booking-begin-month-input",date:a,minDate:t.today,dayId:"calendar-booking-begin-day-input"}),e.createElement(G,{hourId:"calendar-booking-begin-hour-input",minuteId:"calendar-booking-begin-minute-input",minHour:M?t.today.getHours():0,setHour:function(e){g(e),a?oe(new Date(a.getFullYear(),a.getMonth(),a.getDate(),e,null!=m?m:0)):t.bookingBegin&&oe(new Date(t.bookingBegin.getFullYear(),t.bookingBegin.getMonth(),t.bookingBegin.getDate(),e,null!=m?m:0))},hour:d,minMinute:M?t.today.getMinutes():0,setMinute:function(e){b(e),a?oe(new Date(a.getFullYear(),a.getMonth(),a.getDate(),null!=d?d:0,e)):t.bookingBegin&&oe(new Date(t.bookingBegin.getFullYear(),t.bookingBegin.getMonth(),t.bookingBegin.getDate(),null!=d?d:0,null!=e?e:0))},minute:m}),e.createElement("button",{className:"button calendar-change-time-button",onClick:function(){a?ce(new Date(a.getFullYear(),a.getMonth(),a.getDate(),d,m)):t.setBookingBegin(null),P(!1)},disabled:!a},"Startzeitpunkt festlegen")):e.createElement(e.Fragment,null,e.createElement(te,{current:t.bookingBegin,previousDateDisabled:M,previousTimeDisabled:O,handleNextDate:function(){de(1)},handlePreviousDate:function(){de(-1)},handleNextTime:function(){ge(1)},handlePreviousTime:function(){ge(-1)}}),e.createElement("button",{className:"button calendar-change-time-button",onClick:function(){return P(!0)}},"Startzeitpunkt ",t.bookingBegin?"ändern":"festlegen")),e.createElement("h4",null,"Bis:"),Y||!t.bookingEnd?e.createElement(e.Fragment,null,e.createElement(W,{setDate:ie,yearId:"calendar-booking-end-year-input",monthId:"calendar-booking-end-month-input",date:u,minDate:null!==(n=t.bookingBegin)&&void 0!==n?n:void 0,dayId:"calendar-booking-end-day-input"}),e.createElement(G,{hourId:"calendar-booking-end-hour-input",minuteId:"calendar-booking-end-minute-input",minHour:j?d:0,hour:k,setHour:function(e){E(e),u?ie(new Date(u.getFullYear(),u.getMonth(),u.getDate(),e,null!=D?D:0)):t.bookingEnd&&ie(new Date(t.bookingEnd.getFullYear(),t.bookingEnd.getMonth(),t.bookingEnd.getDate(),e,null!=D?D:0))},minMinute:j?m:0,minute:D,setMinute:function(e){if(S(e),u)ie(new Date(u.getFullYear(),u.getMonth(),u.getDate(),null!=k?k:0,e));else if(t.bookingEnd){var n;ie(new Date(t.bookingEnd.getFullYear(),t.bookingEnd.getMonth(),t.bookingEnd.getDate(),null!==(n=newEndHour)&&void 0!==n?n:0,e))}}}),e.createElement("button",{className:"button calendar-change-time-button",disabled:!u,onClick:function(){u?se(new Date(u.getFullYear(),u.getMonth(),u.getDate(),k,D)):t.setBookingEnd(null),$(!1)}},"Endzeitpunkt festlegen")):e.createElement(e.Fragment,null,e.createElement(te,{current:t.bookingEnd,previousDateDisabled:j,previousTimeDisabled:F,handleNextDate:function(){fe(1)},handlePreviousDate:function(){fe(-1)},handleNextTime:function(){me(1)},handlePreviousTime:function(){me(-1)}}),e.createElement("button",{className:"button calendar-change-time-button",onClick:function(){return $(!0)}},"Endzeitpunkt ",t.bookingEnd?"ändern":"festlegen"))),e.createElement("button",{type:"submit",className:"button is-success calendar-submit-button",disabled:!t.bookingBegin||!t.bookingEnd},"Jetzt ",!!U&&e.createElement(e.Fragment,null,"für ",e.createElement(Q,{amount:U})," ")," buchen!"))};ae.propTypes={bookingBegin:a().object,setBookingBegin:a().func.isRequired,bookingEnd:a().object,setBookingEnd:a().func.isRequired,setBookingBeginAndEnd:a().func.isRequired,handleSubmit:a().func.isRequired,submitRef:a().object.isRequired,apiBackend:a().string};const oe=ae;function ie(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le=function(t){var n=t.setBookingDuration,r=t.hourCount,a=t.text;return e.createElement("button",{className:"button calendar-asap-booking-button",onClick:function(){return n(r)}},a)};le.propTypes={setBookingDuration:a().func.isRequired,hourCount:a().number.isRequired,text:a().string.isRequired};var ce=function(t){var n,r,a=t.today,o=t.submitRef,i=(n=e.useState(null),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(n,r)||ie(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=i[0],c=i[1],s=function(t,n){return 1===t?n.push(e.createElement(le,{setBookingDuration:d,hourCount:1,text:"1 Stunde"})):24===t?n.push(e.createElement(le,{setBookingDuration:d,hourCount:24,text:"1 Tag"})):n.push(e.createElement(le,{setBookingDuration:d,hourCount:t,text:t+" Stunden"})),n};e.useEffect((function(){var e,n=[],r=!1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ie(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}(t.bookings);try{for(o.s();!(e=o.n()).done;){var i=e.value,u=l(i.begin,a);if(0===u&&(!1===r||n.length>0)){if(i.begin.toUTCString()===a.toUTCString()||i.begin<a&&i.end>=a){r=!0,n=[];continue}if(i.begin>a){r=!0;for(var d=Math.abs(i.begin-a)/36e5,g=1;g<=3&&d>=g;)n=s(g,n),g++}}else-1===u&&i.end>=a&&(r=!0,n=[])}}catch(e){o.e(e)}finally{o.f()}if(!r)for(var f=0,m=[1,2,3,24];f<m.length;f++)s(m[f],n);c(n)}),[t.bookings]);var d=function(e){t.setBookingBeginAndEnd(t.today,new Date(t.today.getTime()+36e5*e)),o.current&&screen.width<=950&&o.current.scrollIntoView()};return u&&u.length>0?e.createElement(e.Fragment,null,e.createElement("h3",null,"Jetzt buchen für.."),u.map((function(t,n){return e.createElement(e.Fragment,{key:n},t)}))):e.createElement(e.Fragment,null,e.createElement("h3",null,"Eine sofortige Buchung ist derzeit nicht möglich"),e.createElement("p",null,"Es existiert für den aktuellen Zeitpunkt bereits eine Buchung.",e.createElement("br",null),"Sie haben dennoch die Möglichkeit, einen späteren Startzeitpunkt auszuwählen.",e.createElement("br",null),"Dies können Sie entweder über das Formular unten oder mithilfe der Monatsansicht erledigen."))};ce.propTypes={today:a().object.isRequired,setBookingBegin:a().func.isRequired,setBookingEnd:a().func.isRequired,submitRef:a().object.isRequired,bookings:a().arrayOf(a().shape(j)).isRequired,longestAllowedBooking:a().number,setBookingBeginAndEnd:a().func};const se=ce;function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=function(t){return e.createElement("div",{"aria-live":"assertive","aria-relevant":"additions text"},e.createElement("p",null,e.createElement("span",{className:"calendar-meta-display calendar-warning-display"},t.maxReached&&t.maxReachedWarning)),e.createElement("p",{className:"calendar-meta-display calendar-error-display"},t.errorString))};me.propTypes={maxReached:a().bool.isRequired,maxReachedWarning:a().string,errorString:a().oneOfType([a().element,a().string])};var be=function(t){var n,r=de(e.useState(E(new Date)),2),a=r[0],i=r[1],u=de(e.useState(null!==(n=t.initialView)&&void 0!==n?n:"day"),2),c=u[0],s=u[1],f=de(e.useState(""),2),p=f[0],h=f[1],v=de(e.useState(!1),2),k=v[0],w=v[1],D=de(e.useState(),2),S=D[0],B=D[1],M=de(e.useState(),2),R=M[0],x=M[1],j=de(e.useState([]),2),T=j[0],A=j[1],O=de(e.useState(new Map),2),I=O[0],C=O[1],F=de(e.useState("end"),2),N=F[0],_=F[1],P=de(e.useState(null),2),Y=P[0],$=P[1],L=function(){var e=E(new Date);i(e),S&&S<e&&z(e)};e.useEffect((function(){var e=setInterval(L,6e4);return function(){clearInterval(e)}}),[S]),e.useEffect((function(){$(t.maxBookingLength&&t.maxBookingLength>0?1e3*t.maxBookingLength:null)}),[t.maxBookingLength]);var U=function(e,t){if(t){if(e){var n=t.getHours(),r=e.getHours();0===n&&r!==n&&t.setHours(r,e.getMinutes())}if(0===l(t,a)){var o=t.getHours(),i=t.getMinutes(),u=a.getHours(),c=a.getMinutes();(o<u||o===u&&i<=c)&&t.setHours(u,c)}}return t},z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_("begin");var r=n?e:U(S,e);r&&R&&!t?Z(r,R,"begin"):B(E(r))},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_("end");var n=t?e:U(R,e);S&&n?Z(S,n,"end"):x(y(n))},V=function(e,t){if(e&&t){var n="begin"===N?"end":"begin";Z(e,t,n),_(n)}else e||t?(e!==S&&z(e),t!==R&&W(t)):(B(null),x(null),_("end"))},Z=function(e,t,n){var r=function(e,t,n,r,a){if(e>t)throw new Error("Impossible new booking. End cannot be before begin. Start: "+e.toString()+" End: "+t.toString());var i=[];t||(t=new Date(e.getTime()+36e5));var u,c=!1;return function(e,t,n){return n&&Math.abs(t-e)>n}(e,t,n)&&(c=!0,"begin"===a?t=function(e,t){return new Date(e.getTime()+t)}(e,n):e=function(e,t){return new Date(e.getTime()-t)}(t,n)),(u=0===l(e,t)?function(e,t,n){var r=g(e,n);if(!0===r.partial){var a=!1;if(r.bookings.length>1){var i,u=o(r.bookings);try{for(u.s();!(i=u.n()).done;){var l=i.value;l.begin>=t||l.end<=e||(a=!0,e<l.begin&&t>l.begin&&t<l.end?t=l.begin:e=l.end,e>t&&(t=e))}}catch(e){u.e(e)}finally{u.f()}}else r.from>e&&(e=r.from,a=!0),r.until<t&&((t=r.until)<e&&(t=e),a=!0);return[a,e,t]}return r.available?[!1,e,t]:[!0]}(e,t,r):"begin"===a?function(e,t,n){var r=!1,a=m(e,n,864e5,e,t);a[0]&&(r=!0,e=a[1]);var o=b(e,n,864e5,e,t);return o[0]&&(r=!0,t=o[1]),[r,e,t]}(e,t,r):function(e,t,n){var r=m(t,n,-864e5,e,t),a=r[0];t=r[1];var o=b(t,n,-864e5,e,t);return o[0]&&(a=!0,e=o[1]),[a,e,t]}(e,t,r))[0]?u[1]&&u[2]?(i.push("unavailable"),e=u[1],t=u[2]):(i.push("unavailable_impossible"),e(null),t(null)):c&&i.push("tooLong"),{begin:e,end:t,errors:i}}(e,t,Y,I,n);Q(r.errors),B(E(r.begin)),x(y(r.end))};e.useEffect((function(){var e=[];if(t.bookings){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ge(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}(t.bookings);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.push({begin:new Date(a.begin),end:new Date(a.end)})}}catch(e){r.e(e)}finally{r.f()}}A(e),C(function(e){var t,n=new Map,r=o(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.begin>a.end)throw error("Invalid booking. End time cannot be before start time.");var i=a.begin.getDate(),u=new Date(a.begin.getFullYear(),a.begin.getMonth(),i),l=u.getTime(),c=new Date(a.end.getFullYear(),a.end.getMonth(),a.end.getDate()),s=c.getTime(),g=l===s?0:l<s?-1:1,f=u.toDateString();if(-1===g){d(n,f,{partial:a.begin.getHours()>0&&"bottom",begin:a.begin}),d(n,(0===a.end.getHours()?new Date(c-864e5):c).toDateString(),{partial:a.end.getHours<23,end:a.end});for(var m=new Date(u.getTime()),b=i+1;m.setDate(b)&&m<c;)d(n,m.toDateString(),{partial:!1}),b++}else{if(0!==g)throw"Invalid booking. End time cannot be before start time.";var p="false",h=null,v=null;a.begin.getHours()>0&&(p=!0,h=a.begin),a.end.getHours()<23&&(p=!0,v=a.end),d(n,f,{partial:p,begin:h,end:v})}}}catch(e){r.e(e)}finally{r.f()}return n}(e))}),[t.bookings]);var J=e.useRef(null),G="Sie haben die längste mögliche Buchungsdauer erreicht.",K={unavailable:"Der von Ihnen ausgewählte Buchungszeitraum enthielt Zeiten, die nicht verfügbar sind. Er wurde automatisch angepasst.",unavailable_impossible:"Der von Ihnen ausgewählte Buchungszeitraum ist bereits vergeben und konnte nicht automatisch angepasst werden. Bitte wählen Sie einen anderen Zeitraum.",tooLong:"Der von Ihnen ausgewählte Buchungszeitraum war zu lang. Er wurde automatisch gekürzt."},Q=function(t){var n="",r=!1;t.forEach((function(t){n=e.createElement(e.Fragment,null,n,K[t],e.createElement("br",null)),"tooLong"===t&&(r=!0)})),w(r),h(n)},X=function(e){s(e.target.value)};return e.createElement("div",{className:"calendar-container"},e.createElement("div",{className:"calendar-date-container"},e.createElement(me,{maxReached:k,errorString:p,maxReachedWarning:G}),e.createElement("p",{className:"calendar-header"},e.createElement("span",{className:"calendar-view-change-meta-label"},"Ansicht:"),e.createElement("input",{type:"radio",name:"view",value:"asap",className:"calendar-view-radio",checked:"asap"===c,onChange:X,id:"calendar-view-radio-asap"}),e.createElement("label",{htmlFor:"calendar-view-radio-asap"},"Sofort"),e.createElement("input",{type:"radio",name:"view",value:"month",className:"calendar-view-radio",checked:"month"===c,onChange:X,id:"calendar-view-radio-month"}),e.createElement("label",{htmlFor:"calendar-view-radio-month"},"Monat"),e.createElement("input",{type:"radio",name:"view",className:"calendar-view-radio",value:"3months",checked:"3months"===c,onChange:X,id:"calendar-view-radio-3months"}),e.createElement("label",{htmlFor:"calendar-view-radio-3months"},"3 Monate")),"asap"===c&&e.createElement(se,{today:a,setBookingBegin:z,setBookingEnd:W,submitRef:J,bookings:T,setBookingBeginAndEnd:V}),"month"===c&&e.createElement(q,{bookings:T,bookingBegin:S,bookingEnd:R,today:a,unavailableDates:I,setBookingBegin:z,setBookingEnd:W,maxReached:k,setBookingBeginAndEnd:V,lastSet:N}),"3months"===c&&e.createElement(H,{monthCount:3,bookings:T,maxReached:k,bookingBegin:S,bookingEnd:R,today:a,setBookingBeginAndEnd:V,unavailableDates:I,lastSet:N,setBookingBegin:z,setBookingEnd:W}),e.createElement(me,{maxReached:k,maxReachedWarning:G,errorString:p})),e.createElement("div",{className:"calendar-time-container"},e.createElement(oe,{apiBackend:t.apiBackend,getPrice:t.getPrice,bookingBegin:S,setBookingBegin:z,bookingEnd:R,setBookingEnd:W,today:a,submitRef:J,handleSubmit:function(e){e.preventDefault(),L(),t.handleSubmit(S,R)},setBookingBeginAndEnd:V})))};be.propTypes={apiBackend:a().string,bookings:a().arrayOf(a().shape(x)).isRequired,maxBookingLength:a().number,initialView:a().oneOf(["day","month","3months","asap"]),handleSubmit:a().func.isRequired,getPrice:a().func.isRequired};const pe=be})(),r})()}));